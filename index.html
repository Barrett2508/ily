<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>10 Reasons Why I Love You ❤️</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #ffcce5;
      touch-action: none; /* disable browser pinch zoom on phones */
    }
    canvas { display: block; }
    #overlay {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-family: 'Arial Rounded MT Bold', sans-serif;
      font-size: 18px;
      text-shadow: 0 0 8px rgba(255,0,100,0.8);
      user-select: none;
    }
  </style>
</head>
<body>
  <div id="overlay">Scroll (or pinch on phone) to see the next reason ❤️</div>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/loaders/FontLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/geometries/TextGeometry.js"></script>
  <script>
    // ---- Setup ----
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 5;

    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // ---- Floating hearts background ----
    const heartCount = 80;
    const hearts = [];
    const heartGeometry = new THREE.CircleGeometry(0.05, 32);
    const heartMaterial = new THREE.MeshBasicMaterial({ color: 0xff3366, transparent: true, opacity: 0.7 });

    for (let i=0; i<heartCount; i++) {
      const heart = new THREE.Mesh(heartGeometry, heartMaterial.clone());
      heart.position.set(
        (Math.random() - 0.5) * 12,
        (Math.random() - 0.5) * 8,
        -Math.random() * 5
      );
      heart.material.opacity = Math.random()*0.8+0.2;
      scene.add(heart);
      hearts.push(heart);
    }

    // ---- Reasons ----
    const reasons = [
      "You make me laugh every day",
      "You believe in me always",
      "Your smile brightens my world",
      "You’re my safe place",
      "You inspire me to be better",
      "We have the best adventures",
      "You love me for who I am",
      "You’re my best friend",
      "You’re beautiful inside and out",
      "You’re my everything ❤️"
    ];

    let currentIndex = 0;
    let texts = [];

    const loader = new THREE.FontLoader();
    loader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json", function(font){
      reasons.forEach((reason, i) => {
        const geometry = new THREE.TextGeometry(reason, {
          font: font,
          size: 0.35,
          height: 0.05,
        });
        geometry.center();
        const material = new THREE.MeshBasicMaterial({ 
          color: 0xffffff, 
          transparent: true, 
          opacity: i===0 ? 1 : 0 
        });
        const mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);
        texts.push(mesh);
      });
    });

    // ---- Transition ----
    function showReason(newIndex) {
      if (newIndex === currentIndex || !texts.length) return;
      const fromMesh = texts[currentIndex];
      const toMesh = texts[newIndex];
      let progress = 0;
      function animateFade(){
        progress += 0.03;
        if(fromMesh) fromMesh.material.opacity = 1 - progress;
        if(toMesh) toMesh.material.opacity = progress;
        if(progress < 1) requestAnimationFrame(animateFade);
      }
      animateFade();
      currentIndex = newIndex;
    }

    function nextReason() {
      const next = (currentIndex + 1) % reasons.length;
      showReason(next);
    }
    function prevReason() {
      const prev = (currentIndex - 1 + reasons.length) % reasons.length;
      showReason(prev);
    }

    // ---- Scroll (desktop / MacBook trackpad) ----
    let scrollCooldown = false;
    document.addEventListener("wheel", (e)=>{
      if(scrollCooldown) return;
      if (e.deltaY < 0) nextReason();
      else prevReason();
      scrollCooldown = true;
      setTimeout(()=>scrollCooldown=false, 500); // debounce
    }, {passive:true});

    // ---- Pinch (mobile) ----
    let startDist = null;
    document.addEventListener("touchmove", (e)=>{
      if(e.touches.length === 2){
        let dx = e.touches[0].pageX - e.touches[1].pageX;
        let dy = e.touches[0].pageY - e.touches[1].pageY;
        let dist = Math.sqrt(dx*dx + dy*dy);
        if(startDist !== null){
          if(dist - startDist > 20) { // pinch out
            nextReason();
            startDist = dist;
          } else if(startDist - dist > 20) { // pinch in
            prevReason();
            startDist = dist;
          }
        } else {
          startDist = dist;
        }
      }
    }, {passive:true});
    document.addEventListener("touchend", ()=>{ startDist = null; });

    // ---- Animate ----
    function animate(){
      requestAnimationFrame(animate);

      // Move floating hearts
      hearts.forEach(h=>{
        h.position.y += 0.01;
        if(h.position.y > 4) h.position.y = -4;
      });

      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener("resize", ()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
